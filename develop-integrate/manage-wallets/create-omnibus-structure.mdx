---
title: "Create Omnibus Structure"
---

JUMP TO

## Introduction

*   [API Overview](/reference/api-overview)
*   [REST API Guide](/reference/rest-api-guide-1)
*   [Authenticate](/reference/signing-a-request-jwt-structure)
*   [API Idempotency](/reference/api-idempotency)
*   [Rate Limiting](/reference/rate-limiting)
*   [Transaction Sources & Destinations](/reference/transaction-sources-destinations)

## Errors & Data Objects

*   [API Responses and Error Codes](/reference/api-error-codes)
*   [Transaction Statuses](/reference/statuses)
    *   [Statuses](/reference/statuses)
    *   [Sub-Statuses](/reference/sub-statuses)
*   [Data Objects](/reference/data-objects)
    *   [Vault Objects](/reference/vault-objects)
    *   [Exchange Account Objects](/reference/exchange-objects)
    *   [Fiat Account Objects](/reference/fiat-account-objects)
    *   [Network Connection Objects](/reference/network-objects)
    *   [Internal/External Wallet Objects](/reference/internalexternal-wallet-objects)
    *   [Contract Objects](/reference/contract-objects)
    *   [Blockchain & Asset Objects](/reference/supported-assets-object)
    *   [Transaction Objects](/reference/transaction-objects)
    *   [Transaction Authorization Objects](/reference/transaction-authorization-objects)
    *   [Fee Estimation Objects](/reference/fee-estimation-objects)
    *   [Transaction Screening Objects](/reference/transaction-screening-objects)
    *   [Raw Signing Objects](/reference/raw-signing-objects)
    *   [Payments Objects](/reference/payments-objects)
    *   [Gas Station Objects](/reference/gas-station-objects)
    *   [User Object](/reference/user-object)
    *   [Webhook Object](/reference/webhook-object)
    *   [NFT Objects](/reference/nft-objects)
    *   [Web3 Connection Objects](/reference/web3-connection-objects)
    *   [General Objects](/reference/general-objects)
*   [Webhooks Data Objects](/reference/webhooks-notifications-1)
    *   [Vault Webhooks](/reference/vault-webhooks)
    *   [Exchange & Fiat Account Webhooks](/reference/exchange-fiat-account-webhooks)
    *   [Network Connection Webhooks](/reference/network-connection-webhooks)
    *   [Smart Transfer Webhooks](/reference/smart-transfer-webhooks)
    *   [Internal, External & Contract Wallet Webhooks](/reference/internal-external-contract-wallet-webhooks)
    *   [Transaction Webhooks](/reference/transaction-webhooks)
    *   [NFT Webhooks](/reference/nft-webhooks)
*   [Handle API Errors](/reference/handling-api-errors)

## SDKs & Dev Tools

*   [Postman Guide](/reference/explore-postman-collection)
*   [TypeScript SDK](/reference/typescript-sdk)
*   [Python SDK](/reference/new-python-sdk)
*   [Java SDK](/reference/java-sdk)
*   [JS SDK (Legacy)](/reference/js-sdk-legacy)
*   [Python SDK (Legacy)](/reference/python-sdk)
*   [EVM Web3 Provider](/reference/evm-web3-provider)
*   [EVM Local JSON RPC](/reference/evm-local-json-rpc)
*   [Hardhat Plugin](/reference/hardhat-plugin)
*   [Solana Web3 Adapter](/reference/solana-web3-adapter)

## Manage Your Workspace

*   [Create API Keys](/reference/create-api-keys)
*   [Configure Transaction Authorization Policy](/reference/configure-transaction-authorization-policy)

## Manage Wallets

*   [Create Vault Accounts](/reference/create-vault-account)
*   [Create Vault Wallets](/reference/create-vault-wallet)
*   [Create Omnibus Structure](/reference/create-omnibus-structure)

## Manage Transactions

*   [Create Transactions](/reference/create-transactions)
*   [Boost Transactions](/reference/boost-transactions)
*   [Sweep to Omnibus](/reference/sweep-to-omnibus-1)
*   [Select UTXOs](/reference/select-utxos-for-a-transaction)
*   [Consolidate UTXOs](/reference/consolidate-utxos)
*   [Monitoring Transaction Statuses](/reference/monitoring-transaction-status)

## Manage Transaction Fees

*   [Configure Gas Station](/reference/enable-auto-fueling)
    *   [Enable Auto Fueling](/reference/enable-auto-fueling)
    *   [Set the Gas Station values](/reference/set-the-gas-station-values)
    *   [Fund the Gas Station](/reference/fund-the-gas-station)
    *   [Monitor the Gas Station](/reference/monitor-the-gas-station)
*   [Estimate Transaction Fee](/reference/estimate-transaction-fee)

## Manage Treasury

*   [Execute Smart Transfers](/reference/execute-smart-transfers-1)
*   [Stake Assets](/reference/overview-2)
    *   [Overview](/reference/overview-2)
    *   [Create a Staking Position](/reference/create-stake)
    *   [Unstake & Withdraw](/reference/withdraw-staked-assets)
*   [Connect to Exchanges & FIAT Providers](/reference/connect-to-exchanges-fiat-providers)

## Comply with regulation

*   [Validate Travel Rule](/reference/validate-travel-rule)

## Manage Smart Contracts

*   [Upload Contract Template](/reference/upload-contract-template)

## Manage Assets

*   [Get Supported Assets](/reference/list-supported-assets)
*   [Add Tokens](/reference/add-your-tokens)
*   [Manage NFTs](/reference/deploy-an-nft-collection)
    *   [Deploy an NFT Collection](/reference/deploy-an-nft-collection)
    *   [Mint an NFT](/reference/mint-an-nft)
    *   [Retrieve NFTs](/reference/retrieve-nfts)
    *   [Transfer NFTs](/reference/transfer-nfts)

## SIGN OFFChain MESSAGES

*   [Typed Message Signing](/reference/structuring-the-api-call)
    *   [Structure the API Call](/reference/structuring-the-api-call)
    *   [Sign Typed Messages in Ethereum](/reference/sign-typed-messages-for-ethereum-and-evm-networks)
    *   [Sign Typed Messages in Tron](/reference/signing-typed-messages-in-tron)
    *   [Sign Typed Messages in Bitcoin](/reference/signing-typed-messages-in-bitcoin)
*   [RAW Signing](/reference/structuring-the-api-call-1)
    *   [Structure the API Call](/reference/structuring-the-api-call-1)
    *   [Code Examples](/reference/code-examples-2)
*   [Caching Signatures](/reference/caching-signatures)

## Automate Your Flows

*   [Set API Co-Signer Callback Handler](/reference/authenticate)
    *   [Authenticate](/reference/authenticate)
    *   [Response Object](/reference/response-object)
    *   [Approve Transactions](/reference/approve-transactions)
    *   [Approve Configuration Changes](/reference/approve-configuration-changes)
    *   [Code Examples](/reference/basic-code-example)
        *   [Basic Code Example](/reference/basic-code-example)
        *   [Use the Plugin Based Callback Handler](/reference/plugin-based-callback-handler)
        *   [Validate ETH Raw Transactions](/reference/validate-eth-raw-transactions)
*   [Consume Webhooks](/reference/configure-webhook-urls)
    *   [Configure Webhook URLs](/reference/configure-webhook-urls)
    *   [Validate Requests](/reference/verify-requests)
    *   [Resend Webhook Notifications](/reference/resend-webhook-notifications)
    *   [Code Examples](/reference/code-examples-1)
    *   [Understand Webhook Data Objects](/reference/get-to-know-webhook-data-objects)

## Create Payments

*   [Execute Payouts](/reference/executing-payouts)
*   [Create Payment Flows](/reference/create-workflows)
    *   [Workflow Data Objects](/reference/workflow-data-objects-1)
    *   [Create Workflow Configuration](/reference/create-workflow-configuration)
    *   [Create Workflow Execution](/reference/create-workflow-execution)
    *   [Launch Workflow Execution](/reference/launch-workflow-execution)

## Fireblocks API

*   [Workspace Management](/reference/freezeworkspace)
    *   [Freezepost](/reference/freezeworkspace)
    *   [List user groupsget](/reference/getusergroups)
    *   [Create user grouppost](/reference/createusergroup)
    *   [Get user groupget](/reference/getusergroup)
    *   [Update user groupput](/reference/updateusergroup)
    *   [Delete user groupdelete](/reference/deleteusergroup)
    *   [List usersget](/reference/getusers)
    *   [Get audit logsget](/reference/getaudits)
    *   [Get audit logsget](/reference/getauditlogs)
    *   [Update admin quorum thresholdput](/reference/setadminquorumthreshold)
    *   [Enable or disable transactions to One Time Addressesput](/reference/setotastatus)
    *   [Returns current One Time Address statusget](/reference/getotastatus)
    *   [Returns current workspace statusget](/reference/getworkspacestatus)
    *   [Get console usersget](/reference/getconsoleusers)
    *   [Create console userpost](/reference/createconsoleuser)
    *   [Get API Keysget](/reference/getapiusers)
    *   [Create API Keypost](/reference/createapiuser)
    *   [Resets devicepost](/reference/resetdevice)
    *   [Get whitelisted ip addresses for an API Keyget](/reference/getwhitelistipaddresses)
*   [Policy Editor (Beta)](/reference/getactivepolicy)
    *   [Get the active policy and its validationget](/reference/getactivepolicy)
    *   [Get the active draftget](/reference/getdraft)
    *   [Update the draft with a new set of rulesput](/reference/updatedraft)
    *   [Send publish request for a certain draft idpost](/reference/publishdraft)
    *   [Send publish request for a set of policy rulespost](/reference/publishpolicyrules)
*   [Compliance](/reference/validatetravelruletransaction)
    *   [Validate Travel Rule Transactionpost](/reference/validatetravelruletransaction)
    *   [Validate Full Travel Rule Transactionpost](/reference/validatefulltravelruletransaction)
    *   [Get VASP detailsget](/reference/getvaspbydid)
    *   [Get All VASPsget](/reference/getvasps)
    *   [Add jsonDidKey to VASP detailsput](/reference/updatevasp)
    *   [Travel Rule - View Post-Screening Policyget](/reference/getpostscreeningpolicy)
    *   [Travel Rule - View Screening Policyget](/reference/getscreeningpolicy)
    *   [Get Travel Rule Screening Policy Configurationget](/reference/getscreeningconfiguration)
    *   [Update Travel Rule Configurationput](/reference/updatetravelruleconfig)
    *   [Get AML Screening Policy Configurationget](/reference/getamlscreeningconfiguration)
    *   [Update AML Configurationput](/reference/updateamlscreeningconfiguration)
    *   [AML - View Screening Policyget](/reference/getamlscreeningpolicy)
    *   [AML - View Post-Screening Policyget](/reference/getamlpostscreeningpolicy)
    *   [Screening Configuration Updateput](/reference/updatescreeningconfiguration)
*   [Blockchains & Assets](/reference/getsupportedassets-1)
    *   [List all asset types supported by Fireblocksget](/reference/getsupportedassets-1)
    *   [Register an assetpost](/reference/registernewasset)
    *   [Validate destination addressget](/reference/validateaddress)
    *   [Estimate the required fee for an assetget](/reference/estimatenetworkfee)
*   [Vaults](/reference/getvaultaccounts)
    *   [Get vault accountsget](/reference/getvaultaccounts)
    *   [Create a new vault accountpost](/reference/createvaultaccount)
    *   [Get vault accounts (Paginated)get](/reference/getpagedvaultaccounts)
    *   [Get a vault account by IDget](/reference/getvaultaccount)
    *   [Rename a vault accountput](/reference/updatevaultaccount)
    *   [Get vault wallets (Paginated)get](/reference/getassetwallets)
    *   [Hide a vault account in the consolepost](/reference/hidevaultaccount)
    *   [Unhide a vault account in the consolepost](/reference/unhidevaultaccount)
    *   [Activate a wallet in a vault accountpost](/reference/activateassetforvaultaccount)
    *   [Set an AML/KYT customer reference ID for a vault accountpost](/reference/setvaultaccountcustomerrefid)
    *   [Set auto fueling to on or offpost](/reference/setvaultaccountautofuel)
    *   [Get the asset balance for a vault accountget](/reference/getvaultaccountasset)
    *   [Create a new vault walletpost](/reference/createvaultaccountasset)
    *   [Refresh asset balance datapost](/reference/updatevaultaccountassetbalance)
    *   [Get asset addressesget](/reference/getvaultaccountassetaddresses)
    *   [Create new asset deposit addresspost](/reference/createvaultaccountassetaddress)
    *   [Get addresses (Paginated)get](/reference/getvaultaccountassetaddressespaginated)
    *   [Get the maximum spendable amount in a single transaction.get](/reference/getmaxspendableamount)
    *   [Update address descriptionput](/reference/updatevaultaccountassetaddress)
    *   [Assign AML customer reference IDpost](/reference/setcustomerrefidforaddress)
    *   [Convert a segwit address to legacy formatpost](/reference/createlegacyaddress)
    *   [Get UTXO unspent inputs informationget](/reference/getunspentinputs)
    *   [Get the public key for a derivation pathget](/reference/getpublickeyinfo)
    *   [Get the public key of an asset in a vault accountget](/reference/getpublickeyinfoforaddress)
    *   [Get asset balance for chosen assetsget](/reference/getvaultassets)
    *   [Get vault balance by an assetget](/reference/getvaultbalancebyasset)
*   [Transactions](/reference/gettransactions)
    *   [Get transaction historyget](/reference/gettransactions)
    *   [Create a new transactionpost](/reference/createtransaction)
    *   [Estimate transaction feepost](/reference/estimatetransactionfee)
    *   [Get a specific transaction by Fireblocks transaction IDget](/reference/gettransaction)
    *   [Get a specific transaction by external transaction IDget](/reference/gettransactionbyexternalid)
    *   [Set confirmation threshold by Fireblocks Transaction IDpost](/reference/settransactionconfirmationthreshold)
    *   [Drop ETH (EVM) transaction by IDpost](/reference/droptransaction)
    *   [Cancel a transactionpost](/reference/canceltransaction)
    *   [Freeze a transactionpost](/reference/freezetransaction)
    *   [Unfreeze a transactionpost](/reference/unfreezetransaction)
    *   [Set confirmation threshold by transaction hashpost](/reference/setconfirmationthresholdbytransactionhash)
*   [Gas Station](/reference/getgasstationinfo)
    *   [Get gas station settingsget](/reference/getgasstationinfo)
    *   [Get gas station settings by assetget](/reference/getgasstationbyassetid)
    *   [Edit gas station settingsput](/reference/updategasstationconfiguration)
    *   [Edit gas station settings for an assetput](/reference/updategasstationconfigurationbyassetid)
*   [Whitelisted Internal Wallets](/reference/getinternalwallets)
    *   [List internal walletsget](/reference/getinternalwallets)
    *   [Create an internal walletpost](/reference/createinternalwallet)
    *   [Get assets for internal walletget](/reference/getinternalwallet)
    *   [Delete an internal walletdelete](/reference/deleteinternalwallet)
    *   [Set an AML/KYT customer reference ID for an internal walletpost](/reference/setcustomerrefidforinternalwallet)
    *   [Get an asset from an internal walletget](/reference/getinternalwalletasset)
    *   [Add an asset to an internal walletpost](/reference/createinternalwalletasset)
    *   [Delete a whitelisted address from an internal walletdelete](/reference/deleteinternalwalletasset)
*   [Whitelisted External Wallets](/reference/getexternalwallets)
    *   [List external walletsget](/reference/getexternalwallets)
    *   [Create an external walletpost](/reference/createexternalwallet)
    *   [Find an external walletget](/reference/getexternalwallet)
    *   [Delete an external walletdelete](/reference/deleteexternalwallet)
    *   [Set an AML customer reference ID for an external walletpost](/reference/setexternalwalletcustomerrefid)
    *   [Get an asset from an external walletget](/reference/getexternalwalletasset)
    *   [Add an asset to an external wallet.post](/reference/addassettoexternalwallet)
    *   [Delete an asset from an external walletdelete](/reference/removeassetfromexternalwallet)
*   [Whitelisted Contracts](/reference/getcontracts)
    *   [List Whitelisted Contractsget](/reference/getcontracts)
    *   [Create a Whitelisted Contractpost](/reference/createcontract)
    *   [Find a Specific Whitelisted Contractget](/reference/getcontract)
    *   [Delete a Whitelisted Contractdelete](/reference/deletecontract)
    *   [Find a whitelisted contract's assetget](/reference/getcontractasset)
    *   [Add an Asset to a Whitelisted Contractpost](/reference/addcontractasset)
    *   [Delete a Whitelisted Contract's Assetdelete](/reference/deletecontractasset)
*   [Fireblocks Network](/reference/getnetworkconnections)
    *   [List network connectionsget](/reference/getnetworkconnections)
    *   [Creates a new network connectionpost](/reference/createnetworkconnection)
    *   [Update network connection routing policy.patch](/reference/setroutingpolicy)
    *   [Retrieve third-party network routing validation by asset type.get](/reference/checkthirdpartyrouting)
    *   [Get a network connectionget](/reference/getnetwork)
    *   [Deletes a network connection by IDdelete](/reference/deletenetworkconnection)
    *   [Returns all network IDs, both local IDs and discoverable remote IDsget](/reference/getnetworkids)
    *   [Creates a new Network IDpost](/reference/createnetworkid)
    *   [Returns all enabled routing policy asset groupsget](/reference/getroutingpolicyassetgroups)
    *   [Returns specific network ID.get](/reference/getnetworkid)
    *   [Deletes specific network ID.delete](/reference/deletenetworkid)
    *   [Update network id routing policy.patch](/reference/setnetworkidroutingpolicy)
    *   [Update network ID's discoverability.patch](/reference/setnetworkiddiscoverability)
    *   [Update network ID's name.patch](/reference/setnetworkidname)
*   [Smart Transfers](/reference/createticket)
    *   [Create Ticketpost](/reference/createticket)
    *   [Find Ticketget](/reference/searchtickets)
    *   [Search Ticket by IDget](/reference/findticketbyid)
    *   [Set expirationput](/reference/setticketexpiration)
    *   [Add external ref. IDput](/reference/setexternalrefid)
    *   [Submit ticketput](/reference/submitticket)
    *   [Fund ticket manuallyput](/reference/fulfillticket)
    *   [Cancel Ticketput](/reference/cancelticket)
    *   [Create leg (term)post](/reference/createticketterm)
    *   [Get Smart Transfer ticket termget](/reference/findtickettermbyid)
    *   [Update ticket leg (term)put](/reference/updateticketterm)
    *   [Delete ticket leg (term)delete](/reference/removeticketterm)
    *   [Define funding sourceput](/reference/fundticketterm)
    *   [Manually add term transactionput](/reference/manuallyfundticketterm)
    *   [Set user grouppost](/reference/setusergroups)
    *   [Get user groupget](/reference/getsmarttransferusergroups)
*   [Exchange Accounts](/reference/getexchangeaccounts)
    *   [List exchange accountsget](/reference/getexchangeaccounts)
    *   [List connected exchange accountsget](/reference/getpagedexchangeaccounts)
    *   [Get a specific exchange accountget](/reference/getexchangeaccount)
    *   [Internal transfer for exchange accountspost](/reference/internaltransfer)
    *   [Convert exchange account funds from the source asset to the destination assetpost](/reference/convertassets)
    *   [Get an asset for an exchange accountget](/reference/getexchangeaccountasset)
*   [Fiat Accounts](/reference/getfiataccounts)
    *   [List fiat accountsget](/reference/getfiataccounts)
    *   [Find a specific fiat accountget](/reference/getfiataccount)
    *   [Redeem funds to DDApost](/reference/redeemfundstolinkeddda)
    *   [Deposit funds from DDApost](/reference/depositfundsfromlinkeddda)
*   [Tokenization](/reference/issuenewtoken)
    *   [Issue a new tokenpost](/reference/issuenewtoken)
    *   [List all linked tokensget](/reference/getlinkedtokens)
    *   [Link a tokenpost](/reference/link)
    *   [Unlink a tokendelete](/reference/unlink)
    *   [Return a linked tokenget](/reference/getlinkedtoken)
*   [Contract Templates](/reference/getcontracttemplates)
    *   [List all contract templatesget](/reference/getcontracttemplates)
    *   [Upload contract templatepost](/reference/uploadcontracttemplate)
    *   [Return contract template by idget](/reference/getcontracttemplatebyid)
    *   [Delete a contract template by iddelete](/reference/deletecontracttemplatebyid)
    *   [Return contract template's constructorget](/reference/getconstructorbycontracttemplateid)
    *   [Return contract template's functionget](/reference/getfunctionabibycontracttemplateid)
    *   [Deploy contractpost](/reference/deploycontract)
*   [Deployed Contracts](/reference/getdeployedcontracts)
    *   [List deployed contracts dataget](/reference/getdeployedcontracts)
    *   [Return deployed contract data by idget](/reference/getdeployedcontractbyid)
    *   [Return deployed contract dataget](/reference/getdeployedcontractbyaddress)
*   [Contract Interactions](/reference/getdeployedcontractabi)
    *   [Return deployed contract's ABIget](/reference/getdeployedcontractabi)
    *   [Call a read function on a deployed contractpost](/reference/readcallfunction)
    *   [Call a write function on a deployed contractpost](/reference/writecallfunction)
*   [Staking](/reference/getchains)
    *   [List supported chains for Fireblocks Stakingget](/reference/getchains)
    *   [Get chain-specific staking summaryget](/reference/getchaininfo)
    *   [Execute a staking actionpost](/reference/executeaction)
    *   [List staking positions detailsget](/reference/getalldelegations)
    *   [Get staking summary detailsget](/reference/getsummary)
    *   [Get staking summary details by vaultget](/reference/getsummarybyvault)
    *   [Get staking position detailsget](/reference/getdelegationbyid)
    *   [List staking providers detailsget](/reference/getproviders)
    *   [Approve staking terms of servicepost](/reference/approvetermsofservicebyproviderid)
*   [NFTs](/reference/updateownershiptokens)
    *   [Refresh vault account tokensput](/reference/updateownershiptokens)
    *   [List all owned tokens (paginated)get](/reference/getownershiptokens)
    *   [List all distinct owned tokens (paginated)get](/reference/listownedtokens)
    *   [List owned collections (paginated)get](/reference/listownedcollections)
    *   [Refresh token metadataput](/reference/refreshnftmetadata)
    *   [List token data by IDget](/reference/getnft)
    *   [List tokens by IDsget](/reference/getnfts)
    *   [Update token ownership statusput](/reference/updatetokenownershipstatus)
    *   [Update tokens ownership statusput](/reference/updatetokensownershipstatus)
    *   [Update tokens ownership spam propertyput](/reference/updatetokensownershipspam)
*   [dApp Connections](/reference/get)
    *   [List all open dApp connectionsget](/reference/get)
    *   [Create a new dApp connection.post](/reference/create)
    *   [Respond to a pending dApp connection requestput](/reference/submit)
    *   [Remove an existing dApp connectiondelete](/reference/remove)
*   [Cosigners (Beta)](/reference/getcosigners)
    *   [Get all cosignersget](/reference/getcosigners)
    *   [Get cosignerget](/reference/getcosigner)
    *   [Rename cosignerpatch](/reference/renamecosigner)
    *   [Get all API keysget](/reference/getapikeys)
    *   [Get API keyget](/reference/getapikey)
*   [Webhooks](/reference/resendwebhooks)
    *   [Resend failed webhookspost](/reference/resendwebhooks)
    *   [Resend webhooks for a transaction by IDpost](/reference/resendtransactionwebhooks)
*   [Off Exchange](/reference/addoffexchange)
    *   [add collateralpost](/reference/addoffexchange)
    *   [remove collateralpost](/reference/removeoffexchange)
    *   [create settlement for a traderpost](/reference/settleoffexchangetrades)
    *   [get settlements transactions from exchangeget](/reference/getoffexchangesettlementtransactions)
    *   [Find a specific collateral exchange accountget](/reference/getoffexchangecollateralaccounts)
*   [Payments - Payout](/reference/createpayout)
    *   [Create a payout instruction setpost](/reference/createpayout)
    *   [Execute a payout instruction setpost](/reference/executepayoutaction)
    *   [Get the status of a payout instruction setget](/reference/getpayout)
*   [Payments - Flows](/reference/createflowconfiguration)
    *   [Create payment flow configurationpost](/reference/createflowconfiguration)
    *   [Retrieve workflow configurationget](/reference/getflowconfiguration)
    *   [Delete workflow configurationdelete](/reference/deleteflowconfiguration)
    *   [Create workflow executionpost](/reference/createflowexecution)
    *   [Get workflow execution detailsget](/reference/getflowexecution)
    *   [Execute the payments workflowpost](/reference/launchflowexecution)
*   [Key Link (Beta)](/reference/createsigningkey)
    *   [Add a new signing keypost](/reference/createsigningkey)
    *   [Get list of signing keysget](/reference/getsigningkeyslist)
    *   [Get a signing key by \`keyId\`get](/reference/getsigningkey)
    *   [Modify the signing by Fireblocks provided \`keyId\`patch](/reference/updatesigningkey)
    *   [Set agent user id that can sign with the signing key identified by the Fireblocks provided \`keyId\`patch](/reference/setagentid)
    *   [Add a new validation keypost](/reference/createvalidationkey)
    *   [Get list of registered validation keysget](/reference/getvalidationkeyslist)
    *   [Get a validation key by \`keyId\`get](/reference/getvalidationkey)
    *   [Disables a validation keypatch](/reference/disablevalidationkey)

## NCW API

*   [Non Custodial Wallets](/reference/create-1)
    *   [Create a new walletpost](/reference/create-1)
    *   [List walletsget](/reference/findallwallets)
    *   [Get a walletget](/reference/findonewallet)
    *   [Get wallet Latest Backup detailsget](/reference/getlatestbackup)
    *   [Get wallet key setup stateget](/reference/getwalletsetupstate)
    *   [Enable or disable a walletput](/reference/enablewallet)
*   [Non Custodial Wallet Accounts](/reference/createaccount)
    *   [Create a new accountpost](/reference/createaccount)
    *   [Get accountsget](/reference/findallaccounts)
    *   [Get an accountget](/reference/findoneaccount)
*   [Non Custodial Wallet Assets](/reference/getassets)
    *   [Retrieve assetsget](/reference/getassets)
    *   [Retrieve assetget](/reference/getasset)
    *   [Add asset to accountpost](/reference/addasset)
    *   [Refresh asset balanceput](/reference/refreshassetbalance)
    *   [Retrieve asset balanceget](/reference/getassetbalance)
    *   [Retrieve asset addressesget](/reference/getaddresses)
    *   [Retrieve supported assetsget](/reference/getsupportedassets)
*   [Non Custodial Wallet Devices](/reference/getdevices)
    *   [Get registered devicesget](/reference/getdevices)
    *   [Enable or Disable deviceput](/reference/enabledevice)
    *   [Get device key setup stateget](/reference/getdevicesetupstate)
*   [Non Custodial Wallets RPC](/reference/invokerpc)
    *   [Invoke RPCpost](/reference/invokerpc)

# [Overview](#overview)

For customers who have taken the omnibus account structure, it is important to make sure the vaults are structured accordingly, and there is no bottleneck of transactions within the withdrawal mechanism, for example.

<Info>

## 📘

Important:

*   **Intermediate vault accounts**: This is the vault account assigned to an end client. Because you could have numerous end clients, you can use the Fireblocks API to automatically generate as many intermediate vault accounts as needed.
*   **Omnibus deposits**: This is the central vault omnibus account where end-client funds are swept and stored.
*   **Withdrawal pool**: These are the vault accounts containing funds allocated for end-client withdrawal requests. More than one withdrawal pool vault account is required due to blockchain limitations.

Make sure you are following the right structure for you by reading the [Create Direct Custody Wallets](/docs/create-direct-custody-wallets) article.

</Info>
# [Understanding Asset Types](#understanding-asset-types)

Handling your omnibus account correctly requires a clear understanding of the differences between different asset types - UTXO vs Account Based.

Due to the nature of UTXO-based blockchains, the transaction includes the source address for each end client, unlike account-based transactions which require an intermediary vault account.

We will explain the two methodologies separately in this article.

## [UTXO Based](#utxo-based)
  
### [Structure](#structure)

*   In the Omnibus Deposits vault account, you can assign each end client a deposit address (which is derived from the permanent wallet address of the UTXO asset).
*   When adding an address for an end client in the Omnibus Deposits vault account, use the [Create a New Deposit Address of an Asset in a Vault Account API call](/reference/createvaultaccountassetaddress)  
    and use the `name` parameter to associate the end client's ID, as a prefix or suffix for the name of the vault account.  
    The `customerRefId` parameter is the ID for AML providers to associate the owner of funds with transactions and should now be used for other purposes. Both the name of the vault account and the AML customerRefID fields are propagated to every transaction to the end client in your system.

  
### [Deposit](#deposit)

Funds are deposited using the following process:

*   The retail platform shares the deposit address with the end client.
*   The end client makes a deposit.
*   The incoming deposit triggers a webhook notification.
*   Your client-facing software automatically notifies the end client that the deposit was successfully received.
*   The deposit appears on the Transaction History page.

### [Example](#example)
<CodeGroup>
```typescript
const createUTXOWithdrawalVaultAccounts = async (
  assetId: string,
  name: string,
): Promise<Array<{}> | undefined> => {
  const result: Array<{}> = [];

  try {
    const vaultAccount = await fireblocks.vaults.createVaultAccount({
      createVaultAccountRequest: {
        name,
      },
    });

    if (vaultAccount.data) {
      const vaultWallet = await fireblocks.vaults.createVaultAccountAsset({
        vaultAccountId: vaultAccount.data.id as string,
        assetId,
      });

      result.push({
        "Vault Account Name": vaultAccount.data.name,
        "Vault Account ID": vaultAccount.data.id,
        "Asset ID": assetId,
        Address: vaultWallet.data.address,
      });

      console.log(JSON.stringify(result, null, 2));
    }

    return result;
  } catch (error) {
    console.error(error);
  }
};

// Create an omnibus vault account for UTXO based assets
const createOmnibusUTXOAccount = async (
  numOfAddresses: number,
  assetId: string,
): Promise<{} | undefined> => {
  try {
    const myOmnibusVault = await fireblocks.vaults.createVaultAccount({
      createVaultAccountRequest: {
        name: "My Omnibus Vault",
      },
    });

    if (myOmnibusVault.data) {
      const vaultAccountId = myOmnibusVault.data.id as string;

      let result = {};

      await fireblocks.vaults.createVaultAccountAsset({
        vaultAccountId,
        assetId,
      });

      for (let i = 0; i < numOfAddresses; i++) {
        // Generating additional addresses is possible for UTXO based assets only
        await fireblocks.vaults.createVaultAccountAssetAddress({
          assetId,
          vaultAccountId,
          createAddressRequest: {
            description: `UserAddress${i + 1}`,
          },
        });
      }

      const addresses =
        await fireblocks.vaults.getVaultAccountAssetAddressesPaginated({
          vaultAccountId,
          assetId,
        });

      result = {
        "Vault Account Name": myOmnibusVault.data.name,
        "VaultAccount ID": myOmnibusVault.data.id,
        "Asset ID": assetId,
        Addresses: addresses?.data.addresses,
      };

      console.log(JSON.stringify(result, null, 2));

      return result;
    }
  } catch (error) {
    console.error(error);
  }
};
createUTXOWithdrawalVaultAccounts("BTC_TEST", "MyWithdrawalVault");
createOmnibusUTXOAccount(3, "BTC_TEST");


```

```javascript
// Obtain a list of user identifiers associated with the vault accounts and pass them as a strings inside internalCustRefIds
// each of the internalCustRefIds is concatenated to the vault's name 

const internalCustRefIds = ["a","b","c"];
const assetId = "BTC_TEST";

async function createUTXOWithdrawalVaultAccounts(assetId, name){
    vault = await fireblocks.createVaultAccount(name);
    vaultWallet = await fireblocks.createVaultAsset(Number(vault.id), assetId);
    const result = [{"Vault Name": vault.name, "Vault ID": vault.id, "Asset ID": assetId, "Wallet Address": vaultWallet.address}];
    console.log(JSON.stringify(result, null, 2));
    return(result);
}

async function createUTXOOmnibusAccount(amountOfVaultAccounts, assetId, internalCustRefIds){
    let vault;
    let vaultWallet;
    let address = [];

    vault = await fireblocks.createVaultAccount("Omnibus");
    vaultWallet = await fireblocks.createVaultAsset(Number(vault.id), assetId);
    for (let i = 0; i < amountOfVaultAccounts; i++){
        address[i] = await fireblocks.generateNewAddress(Number(vault.id), assetId, "CustomerID_"+internalCustRefIds[i]+"_vault");
    }
    console.log("Created vault account:"+JSON.stringify(vault, null, 2)+" with wallet addresses:"+JSON.stringify(address, null, 2));
    return("Omnibus:", vault, "Addresses:", address);
 }

createUTXOWithdrawalVaultAccounts(assetId, "Withdrawal");
createUTXOOmnibusAccount(2, assetId, internalCustRefIds);

```

```python
# Obtain a list of user identifiers associated with the vault accounts and pass them as a strings inside internalCustRefIds
# each of the internalCustRefIds is concatenated to the vault's name 

ASSET = "BTC_TEST"
CUSTOMER_IDS = ["a", "b", "c"]


def create_utxo_withdrawal_vault(asset: str, name: str):
    vault_id = fireblocks.create_vault_account(name=name)["id"]
    address = fireblocks.create_vault_asset(vault_account_id=vault_id, asset_id=asset)["address"]

    return {name: vault_id}, address


def create_utxo_omnibus_vault(amount: int, asset: str, customer_ids: list, hidden_on_ui: bool = True):
    deposit_address = {}

    vault_id = fireblocks.create_vault_account(name="Omnibus")["id"]
    fireblocks.create_vault_asset(vault_account_id=vault_id, asset_id=asset)
    for i in range(amount):
        address = fireblocks.generate_new_address(vault_account_id=vault_id, asset_id=asset, description=customer_ids[i], hidden_on_ui=hidden_on_ui)["address"]
        deposit_address[customer_ids[i]] = address

    return {"Omnibus": vault_id, "Addresses": deposit_address}


print(create_utxo_withdrawal_vault(ASSET, "Withdrawal"))
print(create_utxo_omnibus_vault(3, ASSET, CUSTOMER_IDS))


```
</CodeGroup>

The above code creates the Omnibus vault and a withdrawal vault, from which we can later on move funds back to end users who would like to settle.

Afterwards, we create a deposit address per end user, while using an available, unique customer ID. The function then returns a dictionary of the newly created vaults and generated deposit addresses.

  
## [Account Based](#account-based)
<Info>

## 📘

Note

Do note this section refers to account based assets without a tag / memo capability. You can refer to tag / memo based assets in the next section.

</Info>
### [Structure](#structure-1)

*   The workspace should contain one or more intermediate vault accounts per end client in addition to a single Omnibus Deposits vault account.
*   When adding a vault account, we recommend using the [Create a New Vault Account API call](/reference/createvaultaccount) and use the `name` parameter to associate the end client's ID, as a prefix or suffix for the name of the vault account.  
    The `customerRefId` parameter is the ID for AML providers to associate the owner of funds with transactions and should now be used for other purposes. Both the name of the vault account and the AML customerRefID fields are propagated to every transaction to the end client in your system.
*   Due to the nature of account-based blockchains, transactions with account-based assets can only be transferred from one account-based address to another account-based address (unlike UTXO, where multiple addresses are included in a single transaction).

### [Deposit](#deposit-1)

Funds are deposited using the following process:

*   The end client receives a deposit address.
*   The end client makes a deposit.
*   The incoming deposit triggers a webhook notification.
*   Your client-facing software automatically notifies the end client that the deposit was successfully received.
*   The deposit is swept to the Omnibus Deposits vault account. You can see further on the sweeping logic in the [Sweeping within an Omnibus Vault structure](/docs/sweep-funds) article.

### [Example](#example-1)
<Info>

## 📘

Recommended: Set "Hidden Vaults" on

For the creation of end user vaults, we will usually choose to set **hiddenOnUi** as true, as part of the **createVaultAccount** endpoint.

By default, it is set to false, hence all of the vaults created in this article will be visible in the UI which is not recommended for a very large amount of vaults.

This also means transfers to these vaults won't be visible in the UI, but only programatically.

</Info>

As the name suggests, the end-user vaults will be serving your end users. If you have followed the structure section, you might have noticed that account based assets require a one-to-one vault per end user.  
The treasury vault is a single account where all of the swept assets will move to. You can see more in regarding to sweeping in the following [sweeping article](/docs/sweep-funds).  
Lastly, we will also create a few withdrawal vaults in order to distribute our load in regards to settlements, making sure we don't have a bottleneck at the withdrawal part.

We will use the below code in order to perform the following:

1.  Create 5 vaults for 5 end users.
2.  Create 1 treasury vault.
3.  Create 3 withdrawal vaults.

<CodeGroup>
```typescript
const createAccountBasedVaultAccounts = async (
  vaultAccountNamePrefix: string,
  numOfVaultAccounts: number,
  assetId: string,
  hiddenOnUI: boolean,
  endUserReferences?: string[],
): Promise<Array<{}> | undefined> => {
  try {
    let vaultAccount: FireblocksResponse<VaultAccount>;
    let results: Array<{}> = [];

    for (let i = 0; i < numOfVaultAccounts; i++) {
      if (
        endUserReferences &&
        endUserReferences.length !== numOfVaultAccounts
      ) {
        throw new Error(
          "Number of Vault Accounts does not equal to the number of end user references",
        );
      }

      vaultAccount = await fireblocks.vaults.createVaultAccount({
        createVaultAccountRequest: {
          name: endUserReferences
            ? vaultAccountNamePrefix + "_" + endUserReferences[i]
            : vaultAccountNamePrefix + "_Vault" + String(i + 1),
          hiddenOnUI,
        },
      });

      const vaultAccountId = vaultAccount.data?.id as string;

      const vaultWallet = await fireblocks.vaults.createVaultAccountAsset({
        assetId,
        vaultAccountId,
      });

      const singleVaultResult = {
        "Vault Account": vaultAccount.data?.name,
        "Vault Account ID": vaultAccountId,
        "Asset ID": assetId,
        Address: vaultWallet.data?.address,
      };

      results.push(singleVaultResult);
      console.log(
        `Created Vault Account:\n ${JSON.stringify(singleVaultResult, null, 2)}`,
      );
    }

    return results;
  } catch (error) {
    console.error(error);
  }
};

createAccountBasedVaultAccounts("Deposits", 5, "ETH_TEST5", true, [
  "UserA",
  "UserB",
  "UserC",
  "UserD",
  "UserE",
]);
createAccountBasedVaultAccounts("Treasury", 1, "ETH_TEST5", false);
createAccountBasedVaultAccounts("Withdrawal_Pool", 3, "ETH_TEST5", false);


```

```javascript
// Obtain a list of user identifiers associated with the vault accounts and pass them as a strings inside internalCustRefIds
// each of the internalCustRefIds is concatenated to the vault's name 

const internalCustRefIds = ["a","b","c","d","e"];
const assetId = "ETH_TEST3";

async function createAccountBasedVaultAccounts(vaultAccountNamePrefix, amountOfVaultAccounts, assetId, hiddenOnUI, internalCustRefIds){
    let createVaultRes;
    let vault;
    let vaultWallet;

    for (let i = 0; i < amountOfVaultAccounts; i++){
        if (internalCustRefIds){
            createVaultRes = await fireblocks.createVaultAccount(vaultAccountNamePrefix.toString()+"_"+internalCustRefIds[i]+"_vault", hiddenOnUI);
        }
        else {
            createVaultRes = await fireblocks.createVaultAccount(vaultAccountNamePrefix.toString()+"_"+i.toString()+"_vault", hiddenOnUI);
        }
        vault = {
            vaultName: createVaultRes.name,
            vaultID: createVaultRes.id
        }
        vaultWallet = await fireblocks.createVaultAsset(Number(vault.vaultID), assetId);
        console.log("Created vault account", vault.vaultName,":", "with wallet address:", vaultWallet.address);
    }
 }

createAccountBasedVaultAccounts("Deposits_End_User", 5, assetId, false, internalCustRefIds);
createAccountBasedVaultAccounts("Treasury", 1, assetId, false, undefined);
createAccountBasedVaultAccounts("Withdrawal_pool", 3, assetId, false, undefined);

```

```python
# Obtain a list of user identifiers associated with the vault accounts and pass them as a strings inside internalCustRefIds
# each of the internalCustRefIds is concatenated to the vault's name

CUSTOMER_IDS = ["a", "b", "c", "d", "e"]
ASSET = "ETH_TEST3"

def create_account_vault_accounts(prefix: str, amount: int, asset_id: str, customer_ids: list, is_hidden: bool = False) -> dict:
  vault_dict = {}
  
  for index in range(amount):
    if customer_ids:
	    vault_name = f"{prefix}_{customer_ids[index]}_vault"
    else:
      vault_name = f"{prefix}_vault"
    vault_id = fireblocks.create_vault_account(name=vault_name, hidden_on_ui=is_hidden)["id"]
    fireblocks.create_vault_asset(vault_id, )
    vault_dict[vault_name] = vault_id
    
  return vault_dict
    

print(create_account_vault_accounts("End-User", 5, ASSET, CUSTOMER_IDS, True))
print(create_account_vault_accounts("Treasury", 1, ASSET))
print(create_account_vault_accounts("Withdrawal", 3, ASSET))


```
</CodeGroup>

In the above code, we have created a function that takes a prefix for the vault name and a number of vaults that we would like to create and also uses the and the internalCustRefIds and <button aria-label="Copy Code" class="rdmd-code-copy fa"></button><code class="rdmd-code lang- theme-light" data-lang="" name="" tabindex="0">hiddenOnUI</code> params, if relevant, depending on vault accounts creation purpose.

We then run it three times.

1.  For the end user vaults.
2.  For the treasury vault.
3.  For the withdrawal vault.

## [Tag / Memo Based](#tag--memo-based)
<Info>

## 📘

Note

Although these are basically also account based, they have a special differentiating attribute: the **tag** / **memo**. This helps us identify different customers / accounts within our single wallet, crediting customers in our internal ledger.

</Info>
### [Structure](#structure-2)

*   In the Omnibus Deposits vault account, you can assign each end client a tag or memo (name varies based on the blockchain).
*   When adding an address for an end client in the Omnibus Deposits vault account, use the [Create a New Deposit Address of an Asset in a Vault Account API call](/reference/createvaultaccountassetaddress)  
    and use the `name` parameter to associate the end client's ID, as a prefix or suffix for the name of the vault account.  
    The `customerRefId` parameter is the ID for AML providers to associate the owner of funds with transactions and should now be used for other purposes. Both the name of the vault account and the AML customerRefID fields are propagated to every transaction to the end client in your system.

### [Deposit](#deposit-2)

Funds are deposited using the following process:

*   The end client receives a deposit address and a **tag** or **memo**.
*   The end client makes a deposit, using the address and the tag.
*   The incoming deposit triggers a webhook notification.
*   Your client-facing software automatically notifies the end client that the deposit was successfully received, assuming he passed a **tag** or **memo**.
*   All of your funds will be located in the same account, while managing different customer balances in an internal ledger.

### [Example](#example-2)
<CodeGroup>
```typescript
const createTagWithdrawalVaultAccounts = async (
  assetId: string,
  name: string,
): Promise<Array<{}> | undefined> => {
  const result: Array<{}> = [];

  try {
    const vaultAccount = await fireblocks.vaults.createVaultAccount({
      createVaultAccountRequest: {
        name,
      },
    });

    if (vaultAccount.data) {
      const vaultWallet = await fireblocks.vaults.createVaultAccountAsset({
        vaultAccountId: vaultAccount.data.id as string,
        assetId,
      });

      result.push({
        "Vault Account Name": vaultAccount.data.name,
        "Vault Account ID": vaultAccount.data.id,
        "Asset ID": assetId,
        Address: vaultWallet.data.address,
      });

      console.log(JSON.stringify(result, null, 2));
    }

    return result;
  } catch (error) {
    console.error(error);
  }
};

// Create an omnibus vault account for Tag/Memo based assets
const createTagOmnibusAccount = async (
  numOfAddresses: number,
  assetId: string,
): Promise<{} | undefined> => {
  try {
    const myOmnibusVault = await fireblocks.vaults.createVaultAccount({
      createVaultAccountRequest: {
        name: "My Omnibus Vault",
      },
    });

    if (myOmnibusVault.data) {
      const vaultAccountId = myOmnibusVault.data.id as string;

      let result = {};

      await fireblocks.vaults.createVaultAccountAsset({
        vaultAccountId,
        assetId,
      });

      for (let i = 0; i < numOfAddresses; i++) {
        // For Tag/Memo based assets, the address of the wallet is always the same but a new Memo/Tag is generated upon each user
        await fireblocks.vaults.createVaultAccountAssetAddress({
          assetId,
          vaultAccountId,
          createAddressRequest: {
            description: `UserAddress${i + 1}`,
          },
        });
      }

      const addresses =
        await fireblocks.vaults.getVaultAccountAssetAddressesPaginated({
          vaultAccountId,
          assetId,
        });

      result = {
        "Vault Account Name": myOmnibusVault.data.name,
        "VaultAccount ID": myOmnibusVault.data.id,
        "Asset ID": assetId,
        Addresses: addresses?.data.addresses,
      };

      console.log(JSON.stringify(result, null, 2));

      return result;
    }
  } catch (error) {
    console.error(error);
  }
};

createTagWithdrawalVaultAccounts("XLM_TEST", "Withdrawal");
createTagOmnibusAccount(2, "XLM_TEST");


```

```javascript
// Obtain a list of user identifiers associated with the vault accounts and pass them as a strings inside internalCustRefIds
// each of the internalCustRefIds is concatenated to the vault's name 

const internalCustRefIds = ["a","b","c"];
const assetId = "XLM_TEST";

async function createTagWithdrawalVaultAccounts(assetId, name){
    vault = await fireblocks.createVaultAccount(name);
    vaultWallet = await fireblocks.createVaultAsset(Number(vault.id), assetId);
    const result = [{"Vault Name": vault.name, "Vault ID": vault.id, "Asset ID": assetId, "Wallet Address": vaultWallet.address}];
    console.log(JSON.stringify(result, null, 2));
    return(result);
}


async function createTagOmnibusAccount(amountOfVaultAccounts, assetId, internalCustRefIds){
    let vault;
    let vaultWallet;
    let tag = [];

    vault = await fireblocks.createVaultAccount("Omnibus");
    vaultWallet = await fireblocks.createVaultAsset(Number(vault.id), assetId);
    for (let i = 0; i < amountOfVaultAccounts; i++){
        tag[i] = await fireblocks.generateNewAddress(Number(vault.id), assetId, "CustomerID_"+internalCustRefIds[i]+"_vault");
    }
    console.log("Created vault account:"+JSON.stringify(vault, null, 2)+" with wallet tag:"+JSON.stringify(tag, null, 2));
    return("Omnibus:", vault, "Tags:", tag);
 }

createTagWithdrawalVaultAccounts(assetId, "Withdrawal");
 createTagOmnibusAccount(2, assetId, internalCustRefIds);

```

```python
ASSET = "XLM_TEST"
CUSTOMER_IDS = ["a", "b", "c"]


def create_tag_withdrawal_vault(asset: str, name: str):
    vault_id = fireblocks.create_vault_account(name=name)["id"]
    address = fireblocks.create_vault_asset(vault_account_id=vault_id, asset_id=asset)["address"]

    return {name: vault_id}, address


def create_tag_omnibus_vault(amount: int, asset: str, customer_ids: list, hidden_on_ui: bool = True):
    deposit_tags = {}

    vault_id = fireblocks.create_vault_account(name="Omnibus")
    address = fireblocks.create_vault_asset(vault_account_id=vault_id, asset_id=asset)["address"]
    for i in range(amount):
        tag = fireblocks.generate_new_address(vault_account_id=vault_id, asset_id=asset, description=customer_ids[i], hidden_on_ui=hidden_on_ui)["tag"]
        deposit_tags[customer_ids[i]] = address

    return {"Omnibus": vault_id, "Address": address, "Tags": deposit_tags}


print(create_tag_withdrawal_vault(ASSET, "Withdrawal"))
print(create_tag_omnibus_vault(3, ASSET, CUSTOMER_IDS))

```
</CodeGroup>

The above code creates the Omnibus vault and a withdrawal vault, from which we can later on move funds back to end users who would like to settle.

Afterwards, we create a deposit tag per end user, while using an available, unique customer ID. The function then returns a dictionary of the newly created vaults and generated deposit tags.